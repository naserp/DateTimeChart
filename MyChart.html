<!DOCTYPE "html">

<html>
<head>
    <title>DateTimeChart d3</title>
    
    <style type="text/css" media="screen">
        text {font-family: Arial;font-size: 9pt;}
    </style>
    
    <link href="Style.css" rel="stylesheet" type="text/css" />
    <script src="d3.js" type="text/javascript"></script>
    <script src="DateTimeChart.js" type="text/javascript"></script>    
</head>
<body>

    <table nowrap="nowrap" width="980"  cellspacing="0">
        <tr>
            <td>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td id="tdYear" class="labelSel" align="center" style="width: 100%">
                <label id="LabelDate" style="font-weight: bold"></label>
            </td>
            <td>
                &nbsp;
            </td>
            <td class="buttons">
                <button type="button" class="positive" onclick="previous();">
                    <
                </button> 
            </td>
            <td class="buttons">
                <button type="button" class="positive" onclick="next();"> 
                    >
                </button> 
            </td>
            <td>
                &nbsp;
            </td>
            <td class="buttons" nowrap="nowrap">
                <button id="buttonDay" type="button" class="positive" onclick="btnDay();">
                    Day
                </button>    
            </td>
            <td class="buttons" nowrap="nowrap">
                <button id="buttonMonth" type="button" class="positive" onclick="btnMonth();">
                    Month
                </button>             
            </td>
            <td class="buttons" nowrap="nowrap">
                <button id="buttonYear" type="button" class="positive" onclick="btnYear();">
                    Year
                </button>            
            </td>
            <td>
                &nbsp;&nbsp;&nbsp;&nbsp;
            </td>
        </tr>
    </table>

    <script type="text/javascript" charset="utf-8">
    var actineStatus = 'year';
   	var month_name = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

    var currentTime = new Date();
    var day = currentTime.getDay();
    var month = currentTime.getMonth();
    var year = currentTime.getFullYear();

    document.getElementById('LabelDate').textContent = year;
    
    var chart = new DateTimeChart(1000, 250, 40, 25,10);
  	btnYear();   	
   	
   	function next() {
    	if(actineStatus == 'day') {
    		if(day < 31) {
    	    	btnDay();
                document.getElementById('LabelDate').textContent = (++day) + " " + month_name[month]+" "+ year;
    		}	
    		
    	}
    	else if(actineStatus == 'month') {
    		if(month < 11) {
    			btnMonth();
    			document.getElementById('LabelDate').textContent = month_name[++month] + " " + year;
    		}

    	}
    	else if(actineStatus == 'year') {
    		if(year < 2011) {
    			btnYear();
    			document.getElementById('LabelDate').textContent = ++year;
    		}
    	}
    }
    
    function previous() {
    	if(actineStatus == 'day') {
    		if(day > 1) {
    			btnDay();
                document.getElementById('LabelDate').textContent = (--day) + " " + month_name[month]+" "+ year;
    		}
    	}
    	else if(actineStatus == 'month') {
    		if(month > 0) {    			
    			btnMonth();
    			document.getElementById('LabelDate').textContent = month_name[--month] + " " + year;
    		}
    	}
    	else if(actineStatus == 'year') {
    		if(year > 1990) {
    			btnYear();
    			document.getElementById('LabelDate').textContent = --year;
    		}
    	}
    }    
    function btnDay() {
    	actineStatus = 'day';
        var dataDayOriginal = new Array();
        randomGen(dataDayOriginal, 25);
    	chart.setDataDay(dataDayOriginal);
    	document.getElementById('LabelDate').textContent = day + "  " +month_name[month] + "  " +year;
    	document.getElementById('buttonDay').className = "Negative";
    	document.getElementById('buttonMonth').className = "Positive";
    	document.getElementById('buttonYear').className = "Positive";
    }
    
    function btnMonth() {
    	actineStatus = 'month';
        var dataMonthOriginal = new Array();
        randomGen(dataMonthOriginal,31);
    	chart.setDataMonth(dataMonthOriginal);
    	document.getElementById('LabelDate').textContent = month_name[month] + "  "+ year;
    	document.getElementById('buttonDay').className = "Positive";
    	document.getElementById('buttonMonth').className = "Negative";
    	document.getElementById('buttonYear').className = "Positive";
    }
    
    function btnYear() {
    	actineStatus = 'year';
    	var dataYearOriginal= new Array();
      	randomGen(dataYearOriginal, 12);
        chart.setDataYear(dataYearOriginal);
    	document.getElementById('LabelDate').textContent = year;
    	document.getElementById('buttonDay').className = "Positive";
    	document.getElementById('buttonMonth').className = "Positive";
    	document.getElementById('buttonYear').className = "Negative";
    }
    
    function randomGen(array , count) {
        for(var i=0;i<count;i++) {
	        array[i] = Math.floor(Math.random() * 11);
        };
        array[2] = 10;
        array[8] = 0;
    }
      	
        
    </script>

</body>
</html>
