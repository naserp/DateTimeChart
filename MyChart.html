<!DOCTYPE html">

<html>
<head>
    <title>DateTimeChart d3</title>
    
    <style type="text/css" media="screen">
        text {font-family: Arial;font-size: 9pt;}
    </style>
    
    <link href="Style.css" rel="stylesheet" type="text/css" />
    <script src="d3.js" type="text/javascript"></script>
    <script src="DateTimeChart.js" type="text/javascript"></script>    
</head>
<body>

    <table width="980" >
        <tr>
            <td style="width: 50%">
                &nbsp;
            </td>
            <td class="buttons">
                <button type="button" class="positive" onclick="previous();">
                    <
                </button> 
            </td>
            <td id="tdDay" class="labelUnSel" style="width: 20px;">
                <label id="LabelDay">3</label>
            </td>
            <td id="tdMonth" class="labelUnSel" style="width: 30px;">
                <label id="LabelMonth">Aug</label>
            </td>
            <td id="tdYear" class="labelSel">
                <label id="LabelYear">2011</label>
            </td>
            <td class="buttons">
                <button type="button" class="positive" onclick="next();"> 
                    >
                </button> 
            </td>
            <td style="width: 50%">
                &nbsp;
            </td>
            <td class="buttons" nowrap="nowrap">
                <button type="button" class="positive" onclick="btnDay();">
                    Day
                </button>    
            </td>
            <td class="buttons" nowrap="nowrap">
                <button type="button" class="positive" onclick="btnMonth();">
                    Month
                </button>             
            </td>
            <td class="buttons" nowrap="nowrap">
                <button type="button" class="positive" onclick="btnYear();">
                    Year
                </button>            
            </td>
        </tr>
    </table>

    <script type="text/javascript" charset="utf-8">
    var actineStatus = 'year';
    function next() {
    	if(actineStatus == 'day') {
           	var lbl = document.getElementById('LabelDay');
    		var day = parseInt(lbl.textContent);
    		if(day < 31) {
    	    	btnDay();
                lbl.textContent = day + 1;
    		}	
    		
    	}
    	else if(actineStatus == 'month') {
        	var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    		var lbl = document.getElementById('LabelMonth');
    		var index = 0;
    		for (var i = 0; i < months.length; i++) {
    			if(months[i] == lbl.textContent) {
    			    index = i;
    				break;
    			}
    		}
    		if(index < 11) {
    			btnMonth();
    			lbl.textContent = months[index + 1];
    		}

    	}
    	else if(actineStatus == 'year') {
           	var lbl = document.getElementById('LabelYear');
    		var year = parseInt(lbl.textContent);
    		if(year < 2011) {
    			btnYear();
    			lbl.textContent = year + 1;
    		}
    	}
    }
    
    function previous() {
    	if(actineStatus == 'day') {
           	var lbl = document.getElementById('LabelDay');
    		var day = parseInt(lbl.textContent);
    		if(day > 1) {
    			btnDay();
    			lbl.textContent = day - 1;
    		}
    	}
    	else if(actineStatus == 'month') {
        	var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    		var lbl = document.getElementById('LabelMonth');
    		var index = 0;
    		for (var i = 0; i < months.length; i++) {
    			if(months[i]== lbl.textContent) {
    			    index = i;
    				break;
    			}
    		}
    		if(index > 0) {
    			btnMonth();
    			lbl.textContent = months[index - 1];    		
    		}
    	}
    	else if(actineStatus == 'year') {
           	var lbl = document.getElementById('LabelYear');
    		var year = parseInt(lbl.textContent);
    		if(year > 1990) {
    			btnYear();
    			lbl.textContent = year - 1;
    		}
    	}
    }    
    function btnDay() {
    	actineStatus = 'day';
        var dataDayOriginal = new Array();
        randomGen(dataDayOriginal, 25);
    	chart.setDataDay(dataDayOriginal);
    	document.getElementById('tdDay').className = 'labelSel';
    	document.getElementById('tdMonth').className = 'labelUnSel';
    	document.getElementById('tdYear').className = 'labelUnSel';
    }
    
    function btnMonth() {
    	actineStatus = 'month';
        var dataMonthOriginal = new Array();
        randomGen(dataMonthOriginal,31);
    	chart.setDataMonth(dataMonthOriginal);
    	document.getElementById('tdDay').className = 'labelUnSel';
    	document.getElementById('tdMonth').className = 'labelSel';
    	document.getElementById('tdYear').className = 'labelUnSel';
    }
    
    function btnYear() {
    	actineStatus = 'year';
    	var dataYearOriginal= new Array();
      	randomGen(dataYearOriginal, 12);
        chart.setDataYear(dataYearOriginal);
    	document.getElementById('tdDay').className = 'labelUnSel';
    	document.getElementById('tdMonth').className = 'labelUnSel';
    	document.getElementById('tdYear').className = 'labelSel';
    }
    

//      if(/msie/i.test(navigator.userAgent)) {
//        alert("Sorry, Internet Explorer is not supported, please get a modern browser like Chrome of Firefox");
//      }
      //else {
      //loadCSV('c:\analytics.csv?' + new Date().getTime());


      	
        var chart = new DateTimeChart(1000, 250, 40, 25,10);
      	btnYear();
      //}

      function randomGen(array , count) {
      	for(var i=0;i<count;i++) {
      		array[i] = Math.floor(Math.random() * 11);
      	};
      	array[2] = 10;
      	array[8] = 0;
      }
      	
//        function loadCSV(url)
//        {
//        	var src = "c:\analytics.csv";
//        	var dest = "results.html"; // The names of our input and output files
//        	// Create some variables
//        	var fso, fin, fout;
//        	var data = new Array();
//        	// Define constants for file access
//        	var forReading = 1;
//        	var forWriting = 2;
//        	var forAppending = 8;
//        	// Create File System Object and open input and output files
//        	fso = new ActiveXObject("Scripting.FileSystemObject");
//        	fin = fso.OpenTextFile(src, forReading);
//        	fout = fso.OpenTextFile(dest, forWriting, true);
//            // Write out header and start of tablef
//            out.WriteLine( htmlHeader() );
//            fout.WriteLine( "<table border='0' cellpadding='1' cellspacing='0' width='100%'>" );
//            // Loop through entire file
//            while( !fin.AtEndOfStream )
//            { 
//            try
//             {  
//            // Read the next line 
//             var line = fin.ReadLine();  
//              // If line if blank - skip it  
//            if( line == "" )   
//             continue;
//            data = line.split( "," );
//            fout.WriteLine( "<tr>" );
//            for( i = 0; i < data.length; i++ )
//              { 
//            fout.WriteLine( "<td>" + data[i] + "</td>" );
//              }
//            fout.WriteLine( "</tr>\r\n" );
//             }
//            catch( e ) 
//            {  
//            WScript.Echo( "Error: " + e.description ); 
//            }
//            }
//            fout.WriteLine( "</table>" );
//            // Close HTML 
//            fout.WriteLine( htmlFooter() );
//            // Close input and output file
//            fin.Close();
//            fout.Close();
//         }

        
    </script>

</body>
</html>
